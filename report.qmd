---
title: "Untitled"
format: html
---


```{r}


# fwrite(sleep, "sleep.csv")
```

## Sono

- 06/11 - 12/11 (Belo Horizonte)
- 13/11 - 26/11 (Salvador)
- 27/11 - 01/12 (SÃ£o Paulo)
- 02/12 - 09/12 (Belo Horizonte)

```{r}
sleep_manual <- fread("sleep.csv") |> mutate(duration = duration(duration))
day_sleep <- sleep_manual |> filter(time == "dia")
night_sleep <- sleep_manual |> filter(time == "noite")
```


```{r}
day_sleep |>
  group_by(day, time) |>
  summarise(
    total_duration = duration(sum(duration)),
    sleep_blocks = n(),
    max_block_duration = duration(max(duration)),
    avg_block_duration = duration(mean(duration)),
    .groups = "drop"
  ) |> kable()
```


```{r}
night_sleep_agg <- night_sleep |>
  select(-time) |> 
  group_by(day, city) |>
  summarise(
    total_duration = pretty(duration(sum(duration))),
    sleep_blocks = n(),
    max_block_duration = pretty(duration(max(duration))),
    avg_block_duration = pretty(duration(mean(duration))),
    .groups = "drop"
  )

writexl::write_xlsx(night_sleep_agg, "night_sleep_agg.xlsx")  
```

